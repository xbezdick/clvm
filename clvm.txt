CLVM and GPT

Content:
1.		LVM

LVM
LVM adds fast and reliable abstraction layer on top of classical partitions. Logical Volume Management provides a means to concatenate, stripe together or otherwise combine partitions into larger virtual ones that administrators can re-size or move, potentially without interrupting system use. Logical partitions aren't limited to size of physical discs. LVM also allows mirroring and snapshots.
LVM layout consists of three logical types: Physical Volume, Volume Group, Logical Volume.
Physical Volume (PV) represents real hardware which can be harddisc, partition or LUN. PV is diveded into small pieces - Physical Extents (PE). PVs can be grouped into groups - Physical Volume Groups (PVG). PVGs are grouped together into Volume Groups (VG) which are divided into small pieces of Logical Extents (LE). LEs grouped together form Logical Volumes (LV). LVs represent raw block devices to running system. Grouping PVs into PVGs allows mapping one LE on more than one PE which allows mirroring and so on. PVs are created by putting Label on usualy second 512byte sector, but can be on any of first four sectors. Label stores name, uuid, size in bites and location of metadata. Metadata are stored in ASCII and contain configuration information about VG and are identical on each PV in same VG. As metadata copies on huge VGs cause high overhead costs LVN is often used only with original metadata. This is done by providing -metadatacopies 0 option to pvcreate on creation of PVs. One can read LVN metadata from raw disk by running "strings /dev/disk | grep "# Generated by LVMA 2048 >
output.txt" where the size may be increased on big systems to 2048+k*1024.
Problems start while using LVN on clusters. This comes from multipple access to metadata which has to be resolved by locking mechanism. While high avalibility clusters don't require locking as only one machine is accessing device at the time it's preffered to use HaLVM and for normal clusters there is solution for locking with using clvmd daemon. CLVM is LVM extension which adds locking of PE during the access.
For clvm to work with Red Hat Cluster Suite one has to have running cluster and turn on clvmd (chkconfig clvmd on;), check that all nodes in cluster have access to PVs and it's done. Work with clvm is nearly the same as with normal LVM.

 
CLVM
Mirroring
EFI
GPT

